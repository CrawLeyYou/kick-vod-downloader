name: build-and-release
on:
  push:
    branches:
      - main
jobs:
  build-and-release:
    name: build-and-release
    runs-on: windows-latest
    steps:
    - name: Checkout repository
      uses: actions/checkout@master
    - name: Set up Node.js
      uses: actions/setup-node@master
      with:
        node-version: 20.0.0
    - name: npm install
      uses: actions/npm@master
      with:
        args: install
    - name: Build executables
      uses: actions/npm@master
      with:
        args: run dist
    - name: Upload to release
      uses: JasonEtco/upload-to-release@master
      with:
          args: dist/*.exe || dist/*.msi
      env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
